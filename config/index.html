<!DOCTYPE html>
<html>
  <head>
  <title>CLASSIQUE</title>
  <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
  <script src='js/slate.min.js'></script>
  </head>

  <body>
    <h1 class='title'>Classique Configuration</h1>
    
    <div class="item-container">
      <div class="item-container-header">Dial</div>
      <div class="item-container-content">
        <label class="item">
          Dark Brass
          <input type="radio" class="item-radio" id="bg_brass_checkbox" name="bg-radio" value="0" checked>
        </label>
        <label class="item">
          Rose Gold
          <input type="radio" class="item-radio" id="bg_rosegold_checkbox" name="bg-radio" value="1">
        </label>
        <label class="item">
          Midnight
          <input type="radio" class="item-radio" id="bg_darkblue_checkbox" name="bg-radio" value="2">
        </label>
        <label class="item">
          Daylight
          <input type="radio" class="item-radio" id="bg_lightblue_checkbox" name="bg-radio" value="3">
        </label>
        <label class="item">
          Corduroy
          <input type="radio" class="item-radio" id="bg_brownstripe_checkbox" name="bg-radio" value="4">
        </label>
      </div>
    </div>
    
    <div class="item-container">
      <div class="item-container-header">Markers</div>
      <div class="item-container-content">
        <label class="item">
          Discreet
          <input type="radio" class="item-radio" id="pt_std_checkbox" name="pt-radio" value="0" checked>
        </label>
        <label class="item">
          Circumferential
          <input type="radio" class="item-radio" id="pt_circumference_checkbox" name="pt-radio" value="1">
        </label>
        <label class="item">
          Trinumeric
          <input type="radio" class="item-radio" id="pt_future_checkbox" name="pt-radio" value="2">
        </label>
        <label class="item">
          None
          <input type="radio" class="item-radio" id="pt_none_checkbox" name="pt-radio" value="3">
        </label>
      </div>
    </div>
	
	<div class="item-container">
      <div class="item-container-header">Hands</div>
      <div class="item-container-content">
        <label class="item">
          Tapered
          <input type="radio" class="item-radio" id="ha_tapered_checkbox" name="ha-radio" value="0" checked>
        </label>
        <label class="item">
          Slender
          <input type="radio" class="item-radio" id="ha_slender_checkbox" name="ha-radio" value="1">
        </label>
        <label class="item">
          Solid
          <input type="radio" class="item-radio" id="ha_solid_checkbox" name="ha-radio" value="2">
        </label>
      </div>
    </div>
    
    
    <div class="item-container">
      <div class="item-container-header">Lower Display</div>
      <div class="item-container-content">
        <label class="item">
          Steps today (numeric)
          <p></p><small>This will only work if you have health set up on your pebble.</small></p>
          <input type="radio" class="item-radio" id="lower_display_steps_num_checkbox" name="ld-radio" value="0" checked>
        </label>
        <label class="item">
          Battery (numeric)
          <input type="radio" class="item-radio" id="lower_display_batt_num_checkbox" name="ld-radio" value="1">
        </label>
        <label class="item">
          Battery (bar)
          <input type="radio" class="item-radio" id="lower_display_batt_bar_checkbox" name="ld-radio" value="2">
        </label>
        <label class="item">
          Calories burnt (numeric)
          <input type="radio" class="item-radio" id="lower_display_cal_num_checkbox" name="ld-radio" value="3">
        </label>
        <label class="item">
          Nothing
          <input type="radio" class="item-radio" id="lower_display_blank_checkbox" name="ld-radio" value="4">
        </label>
      </div>
    </div>
    
    <div class="item-container">
      <div class="item-container-header">Bluetooth warning</div>
      <div class="item-container-content">
        <label class="item">
          Show icon on phone disconnection
          <input type="checkbox" class="item-checkbox" id="bt_icon_checkbox" name="checkbox-1">
        </label>
        <label class="item">
          Vibrate briefly on phone disconnection
          <input type="checkbox" class="item-checkbox" id="bt_vibrate_checkbox" name="checkbox-2">
        </label>
      </div>
    </div>
    

    
    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value='SUBMIT'>
      </div>
    </div>

    
  </body>
  <script>
  function getConfigData() {
	var bgBrassCheckbox =  				document.getElementById('bg_brass_checkbox'					);
	var bgRoseGoldCheckbox =  			document.getElementById('bg_rosegold_checkbox'				);
	var bgDarkBlueCheckbox =  			document.getElementById('bg_darkblue_checkbox'				);
	var bgLightBlueCheckbox = 			document.getElementById('bg_lightblue_checkbox'				);
	var bgBrownStripeCheckbox =  		document.getElementById('bg_brownstripe_checkbox'			);
	
	//var bgRadioSelection = 				document.querySelector('input[name="bg-radio"]:checked')
	
	
	var ptStdCheckbox =  				document.getElementById('pt_std_checkbox'					);
	var ptCircumferenceCheckbox = 		document.getElementById('pt_circumference_checkbox'			);
	var ptFutureCheckbox =  			document.getElementById('pt_future_checkbox'				);
	var ptNoneCheckbox =  				document.getElementById('pt_none_checkbox'					);
	
	//var ptRadioSelection = 				document.querySelector('input[name="pt-radio"]:checked')
	
	var haTaperedCheckbox =  			document.getElementById('ha_tapered_checkbox'				);
	var haSlenderCheckbox =  			document.getElementById('ha_slender_checkbox'				);
	var haSolidCheckbox =  				document.getElementById('ha_solid_checkbox'					);
	
	//var haRadioSelection = 				document.querySelector('input[name="ha-radio"]:checked')
	
    var lowerDisplayStepsNumCheckbox =  document.getElementById('lower_display_steps_num_checkbox'	);
    var lowerDisplayBattNumCheckbox =   document.getElementById('lower_display_batt_num_checkbox'	);
    var lowerDisplayBattBarCheckbox =   document.getElementById('lower_display_batt_bar_checkbox'	);
	var lowerDisplayCalNumCheckbox =    document.getElementById('lower_display_cal_num_checkbox'	);
    var lowerDisplayBlankCheckbox =     document.getElementById('lower_display_blank_checkbox'		);
	
	//var ldRadioSelection = 				document.querySelector('input[name="ld-radio"]:checked')
	
    var btIconCheckbox =                document.getElementById('bt_icon_checkbox'					);
    var btVibrateCheckbox =             document.getElementById('bt_vibrate_checkbox'				);
 
    var options = {
	  //'bg_brass'					: bgBrassCheckbox.checked,
	  //'bg_rosegold'					: bgRoseGoldCheckbox.checked,
	  //'bg_darkblue'					: bgDarkBlueCheckbox.checked,
	  //'bg_lightblue'				: bgLightBlueCheckbox.checked,
	  //'bg_brownstripe'				: bgBrownStripeCheckbox.checked,
	  
	  'bg_selection'				: document.querySelector('input[name="bg-radio"]:checked').value,
	  
	  //'pt_std'						: ptStdCheckbox.checked,
	  //'pt_circumference'			: ptCircumferenceCheckbox.checked,
	  //'pt_future'					: ptFutureCheckbox.checked,
	  //'pt_none'						: ptNoneCheckbox.checked,
	  
	  'pt_selection'				: document.querySelector('input[name="pt-radio"]:checked').value,
	  
	  //'ha_tapered'					: haTaperedCheckbox.checked,
	  //'ha_slender'					: haSlenderCheckbox.checked,
	  //'ha_solid'					: haSolidCheckbox.checked,
		
	  'ha_selection'				: document.querySelector('input[name="ha-radio"]:checked').value,
		
      //'lower_display_steps_num'		: lowerDisplayStepsNumCheckbox.checked,
      //'lower_display_batt_num'		: lowerDisplayBattNumCheckbox.checked,
      //'lower_display_batt_bar'		: lowerDisplayBattBarCheckbox.checked,
	  //'lower_display_cal_num'		: lowerDisplayCalNumCheckbox.checked,
      //'lower_display_blank'			: lowerDisplayBlankCheckbox.checked,
	  
	  'ld_selection'				: document.querySelector('input[name="ld-radio"]:checked').value,
	  
	  
      'bt_icon'						: btIconCheckbox.checked,
      'bt_vibrate'					: btVibrateCheckbox.checked
    };
	
    // Save for next launch
	localStorage[	'bg_brass'			] = bgBrassCheckbox.checked;
	localStorage[	'bg_rosegold'		] = bgRoseGoldCheckbox.checked;
	localStorage[	'bg_darkblue'		] = bgDarkBlueCheckbox.checked;
	localStorage[	'bg_lightblue'		] = bgLightBlueCheckbox.checked;
	localStorage[	'bg_brownstripe'	] = bgBrownStripeCheckbox.checked;
	
	localStorage[	'pt_std'			] = ptStdCheckbox.checked;
	localStorage[	'pt_circumference'	] = ptCircumferenceCheckbox.checked;
	localStorage[	'pt_future'			] = ptFutureCheckbox.checked;
	localStorage[	'pt_none'			] = haSolidCheckbox.checked;
	
	localStorage[	'ha_tapered'		] = haTaperedCheckbox.checked;
	localStorage[	'ha_slender'		] = haSlenderCheckbox.checked;
	localStorage[	'ha_solid'			] = haSolidCheckbox.checked;
	
    localStorage[	'lower_display_steps_num'	] = lowerDisplayStepsNumCheckbox.checked;
    localStorage[	'lower_display_batt_num'	] = lowerDisplayBattNumCheckbox.checked;
    localStorage[	'lower_display_batt_bar'	] = lowerDisplayBattBarCheckbox.checked;
	localStorage[	'lower_display_cal_num' 	] = lowerDisplayCalNumCheckbox.checked;
    localStorage[	'lower_display_blank'		] = lowerDisplayBlankCheckbox.checked;
    localStorage[	'bt_icon'					] = options[	'bt_icon'					];
    localStorage[	'bt_vibrate'				] = options[	'bt_vibrate'				];
    console.log('Got options: ' + JSON.stringify(options));
    return options;
  }
  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }
  var submitButton = document.getElementById('submit_button');
  submitButton.addEventListener('click', function() {
    console.log('Submit');
    // Set the return URL depending on the runtime environment
    var return_to = getQueryParam('return_to', 'pebblejs://close#');
    document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
  });
  (function() {
    var bgBrassCheckbox =  				document.getElementById('bg_brass_checkbox'					);
	var bgRoseGoldCheckbox =  			document.getElementById('bg_rosegold_checkbox'				);
	var bgDarkBlueCheckbox =  			document.getElementById('bg_darkblue_checkbox'				);
	var bgLightBlueCheckbox = 			document.getElementById('bg_lightblue_checkbox'				);
	var bgBrownStripeCheckbox =  		document.getElementById('bg_brownstripe_checkbox'			);
	
	var ptStdCheckbox =  				document.getElementById('pt_std_checkbox'					);
	var ptCircumferenceCheckbox = 		document.getElementById('pt_circumference_checkbox'			);
	var ptFutureCheckbox =  			document.getElementById('pt_future_checkbox'				);
	var ptNoneCheckbox =  				document.getElementById('pt_none_checkbox'					);
	
	var haTaperedCheckbox =  			document.getElementById('ha_tapered_checkbox'				);
	var haSlenderCheckbox =  			document.getElementById('ha_slender_checkbox'				);
	var haSolidCheckbox =  				document.getElementById('ha_solid_checkbox'					);
	
    var lowerDisplayStepsNumCheckbox =  document.getElementById('lower_display_steps_num_checkbox'	);
    var lowerDisplayBattNumCheckbox =   document.getElementById('lower_display_batt_num_checkbox'	);
    var lowerDisplayBattBarCheckbox =   document.getElementById('lower_display_batt_bar_checkbox'	);
	var lowerDisplayCalNumCheckbox =    document.getElementById('lower_display_cal_num_checkbox'	);
    var lowerDisplayBlankCheckbox =     document.getElementById('lower_display_blank_checkbox'		);
    var btIconCheckbox =                document.getElementById('bt_icon_checkbox'					);
    var btVibrateCheckbox =             document.getElementById('bt_vibrate_checkbox'				);
    // Load any previously saved configuration, if available
	if(localStorage[	'bg_brass'					]) {  bgBrassCheckbox.checked 					= JSON.parse(localStorage[	'bg_brass'					]); }
	if(localStorage[	'bg_rosegold'				]) {  bgRoseGoldCheckbox.checked 				= JSON.parse(localStorage[	'bg_rosegold'				]); }
	if(localStorage[	'bg_darkblue'				]) {  bgDarkBlueCheckbox.checked 				= JSON.parse(localStorage[	'bg_darkblue'				]); }
	if(localStorage[	'bg_lightblue'				]) {  bgLightBlueCheckbox.checked 				= JSON.parse(localStorage[	'bg_lightblue'				]); }
	if(localStorage[	'bg_brownstripe'			]) {  bgBrownStripeCheckbox.checked 			= JSON.parse(localStorage[	'bg_brownstripe'			]); }
	
	if(localStorage[	'pt_std'					]) {  ptStdCheckbox.checked 					= JSON.parse(localStorage[	'pt_std'					]); }
	if(localStorage[	'pt_circumference'			]) {  ptCircumferenceCheckbox.checked 			= JSON.parse(localStorage[	'pt_circumference'			]); }
	if(localStorage[	'pt_future'					]) {  ptFutureCheckbox.checked 					= JSON.parse(localStorage[	'pt_future'					]); }
	if(localStorage[	'pt_none'					]) {  ptNoneCheckbox.checked 					= JSON.parse(localStorage[	'pt_none'					]); }
	
	if(localStorage[	'ha_tapered'				]) {  haTaperedCheckbox.checked 				= JSON.parse(localStorage[	'ha_tapered'				]); }
	if(localStorage[	'ha_slender'				]) {  haSlenderCheckbox.checked 				= JSON.parse(localStorage[	'ha_slender'				]); }
	if(localStorage[	'ha_solid'					]) {  haSolidCheckbox.checked 					= JSON.parse(localStorage[	'ha_solid'					]); }
	
    if(localStorage[	'lower_display_steps_num'	]) {  lowerDisplayStepsNumCheckbox.checked 		= JSON.parse(localStorage[	'lower_display_steps_num'	]); }
    if(localStorage[	'lower_display_batt_num'	]) {  lowerDisplayBattNumCheckbox.checked 		= JSON.parse(localStorage[	'lower_display_batt_num'	]); }
    if(localStorage[	'lower_display_batt_bar'	]) {  lowerDisplayBattBarCheckbox.checked 		= JSON.parse(localStorage[	'lower_display_batt_bar'	]); }
	if(localStorage[	'lower_display_cal_num'		]) {  lowerDisplayCalNumCheckbox.checked 		= JSON.parse(localStorage[	'lower_display_cal_num'		]); }
    if(localStorage[	'lower_display_blank'		]) {  lowerDisplayBlankCheckbox.checked 		= JSON.parse(localStorage[	'lower_display_blank'		]); }
    if(localStorage[	'bt_icon'					]) {  btIconCheckbox.checked 					= JSON.parse(localStorage[	'bt_icon'					]); }
    if(localStorage[	'bt_vibrate'				]) {  btVibrateCheckbox.checked 				= JSON.parse(localStorage[	'bt_vibrate'				]); }
  })();
  </script>
</html>
